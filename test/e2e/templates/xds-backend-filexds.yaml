apiVersion: {{ .XdsBackendGroup }}/{{ .XdsBackendAPIVersion }}
kind: {{ .XdsBackendKind }}
metadata:
  name: {{ .XdsBackendResourceName }}
  namespace: {{ .EnvoyGatewayNamespace }}
spec:
  endpoints:
    server:
      server: {{ .FileXdsClusterName }}
    apiType: GRPC
    name: {{ .TestServiceName }}
{{- if .TlsEnabled }}
  tls:
{{- if .TlsCaCertEmpty }}
    caCertificates: {}
{{- else if .TlsCaCertName }}
    caCertificates:
      server:
        server: {{ .FileXdsClusterName }}
      apiType: GRPC
      name: {{ .TlsCaCertName }}
{{- end }}
{{- if .TlsHostname }}
    hostname: "{{ .TlsHostname }}"
{{- end }}
{{- if and (not .TlsCaCertName) (not .TlsCaCertEmpty) (not .TlsHostname) }}
    {}
{{- end }}
{{- end }}

