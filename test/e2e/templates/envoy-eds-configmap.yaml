apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .EnvoyEdsConfigMapName }}
  namespace: {{ .EnvoyGatewayNamespace }}
data:
  # eds-config.yaml is used for file-based EDS (must contain only one resource)
  eds-config.yaml: |
    version_info: "1"
    resources:
    - "@type": type.googleapis.com/envoy.config.endpoint.v3.ClusterLoadAssignment
      cluster_name: "{{ .TestServiceName }}"
      endpoints:
      - lb_endpoints:
        - endpoint:
            address:
              socket_address:
                address: "{{ .TestServiceIP }}"
                port_value: {{ .TestServicePort }}

