apiVersion: v1
kind: Service
metadata:
  name: {{ .TestServiceName }}
  namespace: {{ .TestNamespace }}
spec:
  selector:
    app: {{ .TestServiceName }}
  ports:
  - port: {{ .TestServicePort }}
    targetPort: {{ .TestServicePort }}
    protocol: TCP
    name: http
  {{ if .TestServiceTLSSecretName }}
  - port: {{ .TestServiceTLSPort }}
    targetPort: {{ .TestServiceTLSPort }}
    protocol: TCP
    name: https
  {{ end }}

